<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>로그인</title>

    <!-- 부트스트랩 & 폰트 -->
    <link rel="stylesheet" href="css/bootstrap.min.css" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />

    <!-- Toastr (토스트) -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css"
    />

    <!-- 프로젝트 기본 스타일(있으면 유지) -->
    <link rel="stylesheet" href="css/style.css" />

    <style>
      :root {
        --brand: #23a95f; /* 포인트 보라 */
      }
      body {
        font-family: "Outfit", system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial,
          "Apple Color Emoji", "Segoe UI Emoji";
        background: #f3f4f6;
      }
      .auth-wrap {
        min-height: 100vh;
      }
      .auth-card {
        width: 100%;
        max-width: 440px;
        background: #ffffff;
        border-radius: 16px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.06);
      }
      .brand-badge {
        width: 44px;
        height: 44px;
        border-radius: 12px;
        display: grid;
        place-items: center;
        background: #eef2ff;
        color: var(--brand);
        font-weight: 800;
      }
      .btn-brand {
        background: var(--brand);
        color: #fff;
        border: none;
      }
      .btn-brand:hover {
        filter: brightness(0.95);
        color: #fff;
      }
      .divider {
        height: 1px;
        background: #e5e7eb;
        margin: 20px 0;
      }

      /* 입력 박스 */
      .form-label {
        font-weight: 600;
      }
      .form-control {
        padding: 12px 14px;
        border-radius: 12px;
      }

      /* 입력 바로 위에 뜨는 ‘인라인 토스트’ */
      .inline-toast {
        display: inline-block;
        margin-bottom: 8px;
        padding: 8px 10px;
        border-radius: 10px;
        border: 1px solid #ef4444;
        background: #fff;
        color: #ef4444;
        font-weight: 600;
        font-size: 0.9rem;
        box-shadow: 0 8px 16px rgba(239, 68, 68, 0.08);
        opacity: 0;
        transform: translateY(-6px);
        transition: opacity 0.18s ease, transform 0.18s ease;
      }
      .inline-toast.show {
        opacity: 1;
        transform: translateY(0);
      }
      .inline-toast.hide {
        opacity: 0;
        transform: translateY(-6px);
      }

      .small-text a {
        text-decoration: none;
      }
      .small-text a:hover {
        text-decoration: underline;
      }
    </style>
  </head>

  <body>
    <div class="container auth-wrap d-flex justify-content-center align-items-center px-3">
      <div class="auth-card p-4 p-md-5">
        <!-- 상단 브랜드 -->
        <div class="d-flex align-items-center gap-3 mb-3">
          <div class="brand-badge">
            <i class="bi bi-lightning-fill"></i>
          </div>
          <div>
            <h5 class="m-0 fw-bold">NaHye company</h5>
            <small class="text-muted">Since 2000</small>
          </div>
        </div>

        <!-- 타이틀 -->
        <h3 class="fw-bold mt-2">안녕하세요, 반가워요!</h3>
        <p class="text-muted mb-4">계정으로 로그인해 계속 진행하세요.</p>

        <!-- (요청: 구글 로그인 필요 없음) -->

        <div class="divider"></div>

        <!-- 이메일/비밀번호 로그인 -->
        <form id="loginForm" novalidate>
          <div class="mb-3 form-group" id="idGroup">
            <!-- 인라인 토스트 위치 -->
            <label for="loginId" class="form-label">아이디</label>
            <input
              type="text"
              class="form-control"
              id="loginId"
              name="loginId"
              placeholder="이메일 또는 사용자명"
              value="info@codedthemes.com"
              autocomplete="username"
              required
            />
          </div>

          <div class="mb-2 form-group" id="pwGroup">
            <!-- 인라인 토스트 위치 -->
            <label for="loginPw" class="form-label">비밀번호</label>
            <div class="position-relative">
              <input
                type="password"
                class="form-control pe-5"
                id="loginPw"
                name="loginPw"
                placeholder="비밀번호"
                value="12345"
                autocomplete="current-password"
                required
              />
              <button
                type="button"
                class="btn btn-sm position-absolute top-50 end-0 translate-middle-y me-2"
                id="togglePw"
                aria-label="비밀번호 표시 전환"
                style="background: transparent"
              >
                <i class="bi bi-eye-slash"></i>
              </button>
            </div>
          </div>

          <div class="d-flex justify-content-between align-items-center mb-3">
            <div class="form-check">
              <input class="form-check-input" type="checkbox" id="rememberMe" checked />
              <label class="form-check-label" for="rememberMe">로그인 상태 유지</label>
            </div>
            <a href="forgot.html" class="small-text">비밀번호 찾기</a>
          </div>

          <button type="submit" class="btn btn-brand w-100 py-2 fw-semibold">로그인</button>

          <p class="text-center text-muted small-text mt-3 mb-0">
            계정이 없으신가요? <a href="signup.html">회원가입</a>
          </p>
        </form>
      </div>
    </div>

    <!-- 스크립트 -->
    <script src="js/jquery-3.6.1.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/js/toastr.min.js"></script>

    <script>
      // Toastr 기본 옵션(성공 메시지에 사용)
      toastr.options = {
        positionClass: "toast-top-center",
        timeOut: 1500,
        progressBar: true,
        closeButton: false,
      };

      const MIN_LEN = 4;

      const form = document.getElementById("loginForm");
      const idInput = document.getElementById("loginId");
      const pwInput = document.getElementById("loginPw");
      const togglePw = document.getElementById("togglePw");

      // 비밀번호 보기/숨기기
      togglePw.addEventListener("click", () => {
        const isPw = pwInput.getAttribute("type") === "password";
        pwInput.setAttribute("type", isPw ? "text" : "password");
        togglePw.innerHTML = isPw ? '<i class="bi bi-eye"></i>' : '<i class="bi bi-eye-slash"></i>';
      });

      // 특정 입력 위에 짧게 뜨는 인라인 토스트
      function showInlineToast(inputEl, message) {
        removeInlineToast(inputEl);
        const group = inputEl.closest(".form-group");
        const toast = document.createElement("div");
        toast.className = "inline-toast";
        toast.textContent = message;
        group.insertBefore(toast, group.querySelector("label").nextSibling); // 라벨 바로 아래
        // 애니메이션
        requestAnimationFrame(() => toast.classList.add("show"));
        // 2초 후 자연스럽게 사라짐
        setTimeout(() => {
          toast.classList.add("hide");
          setTimeout(() => toast.remove(), 200);
        }, 2000);
      }

      function removeInlineToast(inputEl) {
        const group = inputEl.closest(".form-group");
        const exist = group && group.querySelector(".inline-toast");
        if (exist) exist.remove();
      }

      function isValidLen(value) {
        return value.trim().length >= MIN_LEN;
      }

      // 입력 시 에러 토스트 제거
      [idInput, pwInput].forEach((el) =>
        el.addEventListener("input", () => removeInlineToast(el))
      );

      form.addEventListener("submit", function (e) {
        e.preventDefault();

        const idOk = isValidLen(idInput.value);
        const pwOk = isValidLen(pwInput.value);

        if (!idOk) showInlineToast(idInput, "4자리 이상 입력하세요");
        if (!pwOk) showInlineToast(pwInput, "4자리 이상 입력하세요");
        if (!idOk || !pwOk) {
          // 첫 번째 에러 위치로 스크롤
          (!idOk ? idInput : pwInput).scrollIntoView({ behavior: "smooth", block: "center" });
          return;
        }

        // 둘 다 4자리 이상이면 성공 토스트 후 index.html로 이동
        toastr.success("로그인 완료되었습니다!");
        setTimeout(() => {
          window.location.href = "index.html";
        }, 1200);
      });
    </script>
  </body>
</html>
